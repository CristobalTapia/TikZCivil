%
\documentclass[11pt,letterpaper,oneside]{book}
\usepackage[left=3cm,right=2cm,top=1cm,bottom=1.5cm,includeheadfoot]{geometry}
\usepackage[english]{babel}
%\usepackage[latin1]{inputenc}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{subfig}
\usepackage{listings}
\usepackage{emp}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{verbatim}   % Comentarios multilinea
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{ifsym}
\usepackage{caption}
%\usepackage{float}
\usepackage[font=small]{caption}
\setlength{\parindent}{1cm}
\usepackage{tikz}
\usepackage{floatrow}
%+++++++++++++++++++++++++++++++
% Se importa la libreria
%+++++++++++++++++++++++++++++++
\usepackage{../tikzcivil}

\begin{document}
\begin{titlepage}
  \title{Documentation for the use of the \emph{tikzcivil} package}
  \author{Cristóbal Tapia\\
    \texttt{crtapia@gmail.com}
  }
  \date{\today}
  \maketitle
\end{titlepage}

\tableofcontents
\newpage
\section{Introduction}


\lstdefinestyle{customasm}{
  belowcaptionskip=1\baselineskip,
  %frame=single,
  xleftmargin=\parindent,
  language=teX,
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\itshape\color{green!40!black},
  keywordstyle=\bfseries\color{blue},
  identifierstyle=\color{black},
  stringstyle=\color{purple},
  stepnumber=0,
  tabsize=2,
  breaklines=true,
  captionpos=b,
  morekeywords={\Support,\begin,\MassWithSpring,\Frame}
}
\lstset{style=customasm, numbers=left, texcl=true}

\chapter{Drawing for the Structural Analysis}
\section{Commands}

\subsection{\texttt{\textbackslash Support} command}
This command is used to generate different types of supports, like fixed, pined or sliding supports. They can also be rotated.\\

\noindent\begin{minipage}{.4\textwidth}
  \centering
    \begin{tikzpicture}[scale=1.0]
      \Support[width = 1cm, type=fixed]
      \Support[position={2cm,0cm}, angle=0, width = 1cm, type=fixedsliding]
      \Support[position={0cm,-1cm}, angle=0, width = 1cm, type=sliding]
      \Support[position={2cm,-1cm}, angle=0, width = 1cm, type=pinned]
    \end{tikzpicture}
    \captionof{figure}{Types of supports available.}
\end{minipage}%
\begin{minipage}[c]{.6\textwidth}
  \begin{lstlisting}[firstnumber=1, label=supportExampleCode]
\begin{tikzpicture}[scale=1.0]
  \Support[width = 1cm, type=fixed]
  \Support[position={2cm,0cm}, angle=0, 
           width = 1cm, type=fixedsliding]
  \Support[position={0cm,-2cm}, angle=0, 
           width = 1cm, type=sliding]
  \Support[position={2cm,-2cm}, angle=0, 
           width = 1cm, type=pinned]
\end{tikzpicture}
  \end{lstlisting}
\end{minipage}

\begin{table}[!h]
  \centering
  \caption{Options for the \texttt{\textbackslash Support} command}
  \begin{tabular}{l p{9cm} |c}\toprule
    Option & Description & default \\\midrule
    \texttt{widht}  & defines de width of the support & \textbf{1cm}                                              \\
    \texttt{position} & (tuple) defines the position of the support & \textbf{\{0,0\}}          \\
    \texttt{type} & defines the type of support. Alternatives: \texttt{fixed, pinned, sliding, fixedsliding} & \textbf{fixed} \\
    \texttt{angle} & rotation in degrees of the support (counterclockwise) & \textbf{0}\\\bottomrule
  \end{tabular}
  \label{tab:supportOptions}
\end{table}


\subsection{\texttt{\textbackslash MassWithSpring} command}
This command draws a typical mass-spring system. It supports also an optional damper and displacement. The basic behavior of this command is shown in fig. \ref{fig:MassWithSpring}. \\

\noindent\begin{minipage}{.4\textwidth}
  \centering
  \begin{tikzpicture}[scale=1]
    \MassWithSpring[]
  \end{tikzpicture}
  \captionof{figure}{Mass-Spring system}
  \label{fig:MassWithSpring}
\end{minipage}%
\begin{minipage}[c]{.6\textwidth}
  \begin{lstlisting}[firstnumber=1, label=massSpringExampleCode]
  \begin{tikzpicture}[scale=1]
    \MassWithSpring[]
  \end{tikzpicture}
  \end{lstlisting}
\end{minipage}

In many situations we would like to describe more interesting systems. This can be achieved applying the optional key values and using the command multiple times, as shown in fig \ref{fig:MassWithSpring2}. As it can bee seen, creating this kind of drawings is very easy and straightforward.\\
\begin{figure}[!ht]
  \centering
  \begin{tikzpicture}[scale=1]
    \MassWithSpring[displacement = 2em, with damper = true]
    \MassWithSpring[displacement = -1em,  with wall = false, position = {10.5em,0em}]
    \MassWithSpring[displacement = 3em,  with wall = false, position = {18.0em,0em}]
  \end{tikzpicture}
  \caption{More complex mass-spring system}
  \label{fig:MassWithSpring2}
\end{figure}

\begin{lstlisting}[firstnumber=1]
  \begin{tikzpicture}[scale=1]
\MassWithSpring[displacement = 2em, with damper = true]
\MassWithSpring[displacement = -1em,  with wall = false, 
                position = {10.5em,0em}]
\MassWithSpring[displacement = 3em,  with wall = false, 
                position = {18.0em,0em}]
  \end{tikzpicture}
\end{lstlisting}


\subsection{\texttt{\textbackslash Frame} command}
Thus command draws a frame with its mass concentrated above. It is a very common model to describe later a multi-story building in 2D. This command has many options, useful to change the displacement, position, use of supports, damper, among others. In the fig. \ref{fig:frame1} can be seen the normal output of the command without any options.\\

\noindent\begin{minipage}{.4\textwidth}
  \centering
  \begin{tikzpicture}[scale=1]
    \Frame[]
  \end{tikzpicture}
  \captionof{figure}{A frame with the mass concentrated at the top.}
  \label{fig:frame1}
\end{minipage}%
\begin{minipage}[c]{.6\textwidth}
  \begin{lstlisting}[firstnumber=1, label=frameExampleCode1]
  \begin{tikzpicture}[scale=1]
\Frame[]
  \end{tikzpicture}
  \end{lstlisting}
\end{minipage}

\begin{table}[!h]
  \centering
  \caption{Options for the \texttt{\textbackslash Frame} command}
  \begin{tabular}{l p{9cm} |c}\toprule
    Option & Description & default \\\midrule
    \texttt{height} & defines the height of the frame/story & \textbf{4cm}                                      \\
    \texttt{widht}  & defines de width of the frame & \textbf{4cm}                                              \\
    \texttt{mass thickness} & defines the thickness of the concentrated mass & \textbf{0.4cm}                   \\
    \texttt{position} & (tuple) defines the position of the base of the left column & \textbf{\{0,0\}}          \\
    \texttt{with support} & boolean option, that allows to show supports or not & \textbf{true}                 \\
    \texttt{with damper} & boolean option, that defines the presence of a damper in the system & \textbf{false} \\
    \texttt{displacement} & defines the amount of horizontal displacement on the top of the frame & \textbf{0cm}\\\bottomrule
  \end{tabular}
  \label{tab:frameOptions}
\end{table}

As with the \texttt{\textbackslash MassWithSpring} command, we can create more complex structures, and even add some displacement to it or add a tuned mass damper on the top (why not?). This can be seen on fig. \ref{fig:frame2}.\\

\noindent\begin{minipage}{.35\textwidth}
  \centering
  \begin{tikzpicture}[scale=0.7]
    \Frame[position = {0em,0em}, displacement=0.07cm]
    \Frame[position = {0.07cm,4cm}, with support=false, displacement=0.7cm]
    \Frame[position = {0.77cm,8cm}, with support=false, displacement=1.7cm]
    \MassWithSpring[position={2.8cm,12cm}, with damper=true]
  \end{tikzpicture}
  \captionof{figure}{A set of frames put one above he other.}
  \label{fig:frame2}
\end{minipage}%
\begin{minipage}[c]{.65\textwidth}
  \begin{lstlisting}[firstnumber=1, label=frameExampleCode2]
\begin{tikzpicture}[scale=0.7]
  \Frame[position = {0em,0em}, displacement=0.07cm]
  \Frame[position = {0.07cm,4cm}, with support=false, displacement=0.7cm]
  \Frame[position = {0.77cm,8cm}, with support=false, displacement=1.7cm]
  \MassWithSpring[position={2.8cm,12cm}, with damper=true]
\end{tikzpicture}
  \end{lstlisting}
\end{minipage}


\subsection{\texttt{\textbackslash FrameSimple} command}


\chapter{Dibujos relacionados con la mecánica de suelos}

\end{document}


